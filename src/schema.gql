# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type User {
  id: ID!
  name: String!
  username: String!
  email: Email!
  roles: [Role!]!
  telephone: String
  birthDate: Date
  createdAt: Date!
  updatedAt: Date!
}

"""Email custom scalar type"""
scalar Email

enum Role {
  USER
  ADMIN
}

"""Date custom scalar type"""
scalar Date

type ListUsers {
  items: [User!]!
  total: Int!
}

type Challenge {
  id: ID!
  name: String!
  gameId: String!
  parentChallenge: Challenge
  description: String
  difficulty: Difficulty!
  mode: Mode!
  modeParameters: [String!]!
  refs: [String!]!
  locked: Boolean!
  hidden: Boolean!
}

enum Difficulty {
  BEGINNER
  EASY
  AVERAGE
  HARD
  MASTER
}

enum Mode {
  NORMAL
  SHAPESHIFTER
  SHORTENING
  SPEEDUP
  HACK_IT
  TIME_BOMB
  DUEL
}

type Game {
  id: ID!
  name: String!
  description: String
  gedilLayerId: String
  gedilLayerDescription: String
  startDate: Date
  endDate: Date
}

type Condition {
  order: Float!
  leftEntity: String!
  leftProperty: String!
  comparingFunction: String!
  rightEntity: String!
  rightProperty: String!
}

type Criteria {
  conditions: [Condition!]!
  junctors: [Junctor!]!
}

enum Junctor {
  AND
  OR
}

type Action {
  type: String!
  parameters: [String!]!
}

type Badge {
  id: ID!
  kind: RewardType!
  players: [PlayerBadge!]!
  gameId: String!
  name: String!
  description: String!
  recurrenceLimit: Float!
}

enum RewardType {
  BADGE
  COUPON
  HINT
  VIRTUAL_ITEM
}

type PlayerBadge {
  id: ID!
  player: Player!
  badge: Badge!
  count: Float!
}

type Coupon {
  id: ID!
  players: [PlayerCoupon!]!
  kind: RewardType!
  gameId: String!
  name: String!
  description: String!
  recurrenceLimit: Float!
}

type PlayerCoupon {
  id: ID!
  player: Player!
  coupon: Coupon!
  count: Float!
}

type Hint {
  id: ID!
  kind: RewardType!
  gameId: String!
  players: [PlayerHint!]!
  exerciseId: String!
  name: String!
  description: String!
  recurrenceLimit: Float!
  message: String!
}

type PlayerHint {
  id: ID!
  player: Player!
  hint: Hint!
  count: Float!
}

type VirtualItem {
  id: ID!
  players: [PlayerVirtualItem!]!
  kind: RewardType!
  gameId: String!
  name: String!
  description: String!
  recurrenceLimit: Float!
}

type PlayerVirtualItem {
  id: ID!
  player: Player!
  virtualItem: VirtualItem!
  count: Float!
}

type Player {
  id: ID!
  userId: String!
  gameId: String!
  points: Float!
  badges: [PlayerBadge!]!
  coupons: [PlayerCoupon!]!
  hints: [PlayerHint!]!
  virtualItems: [PlayerVirtualItem!]!
}

type ChallengeStatus {
  studentId: String!
  challengeId: String!
  gameId: String!
  startedAt: Date
  endedAt: Date
  state: [State!]!
  openedAt: Date
}

enum State {
  LOCKED
  HIDDEN
  OPENED
  FAILED
  COMPLETED
  REJECTED
}

type Submission {
  id: ID!
  exerciseId: String!
  playerId: String!
  gameId: String!
  metrics: JSON
  result: Result
  grade: Float
  feedback: String
  submittedAt: Date!
  evaluatedAt: Date
}

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON @specifiedBy(url: "http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf")

enum Result {
  ACCEPTED
  REJECTED
}

type Query {
  user(id: String!): User!
  users(skip: Int = 0, take: Int = 50, ids: [ID!], name: String, order: String = "DESC", fieldSort: String = "updatedAt"): ListUsers!
  queryCheck: String!
  game(id: String!): Game!
  challenges: [Challenge!]!
  get(challengeId: String!, studentId: String!): ChallengeStatus!
  submission(submissionId: String!): Submission!
  submissions(exerciseId: String!): [Submission!]!
  playersWithCoupon(couponId: String!): [Player!]!
  coupons: [Coupon!]!
  coupon(couponId: String!): [Coupon!]!
  playerHints(exerciseId: String!, id: String!): [Hint!]!
  exerciseHints(exerciseId: String!): [Hint!]!
  playersWithVirtualItem(virtualItemId: String!): [Player!]!
  virtualItems: [VirtualItem!]!
  virtualItem(virtualItemId: String!): [VirtualItem!]!
  playersWithBadge(badgeId: String!): [Player!]!
  badges: [Badge!]!
  badge(badgeId: String!): [Badge!]!
}

type Mutation {
  saveUser(id: ID, userInput: CreateUserInput!): User!
  deleteUser(id: ID!): Boolean!
  login(login: String!, password: String!): User!
  signup(name: String!, username: String!, email: Email!, password: String!): User!
  mutationCheck: String!
  importGEdILArchive(name: String!, description: String, startDate: Date, endDate: Date, users: [String!], file: Upload!): Game!
  createSubmission(id: String!, gameId: String!, exerciseId: String!, playerId: String!, codeFile: String!): Submission!
}

input CreateUserInput {
  name: String!
  username: String!
  email: Email!
  telephone: String
  birthDate: Date
  roles: [Role!] = [USER]
  password: String
}

"""The `Upload` scalar type represents a file upload."""
scalar Upload
