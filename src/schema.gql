# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type Submission {
  id: ID!
  game: Game!
  player: Player!
  exerciseId: String!
  metrics: JSON
  result: Result
  grade: Float
  feedback: String
  submittedAt: Date!
  evaluatedAt: Date
}

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON @specifiedBy(url: "http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf")

enum Result {
  ACCEPT
  WRONG_ANSWER
  TIMEOUT
  OUTPUT_LIMIT_OVERFLOW
  COMPILATION_ERROR
  RUNTIME_ERROR
}

"""Date custom scalar type"""
scalar Date

type Game {
  id: ID!
  name: String!
  description: String
  gedilLayerId: String
  gedilLayerDescription: String
  startDate: Date
  endDate: Date
  players: [Player!]!
  submissions: [Submission!]!
}

type Challenge {
  id: ID!
  game: Game!
  parentChallenge: Challenge
  name: String!
  description: String
  difficulty: Difficulty!
  mode: Mode!
  modeParameters: [String!]!
  refs: [String!]!
  locked: Boolean!
  hidden: Boolean!
}

enum Difficulty {
  BEGINNER
  EASY
  AVERAGE
  HARD
  MASTER
}

enum Mode {
  NORMAL
  SHAPESHIFTER
  SHORTENING
  SPEEDUP
  HACK_IT
  TIME_BOMB
  DUEL
}

type Reward {
  id: ID!
  game: Game!
  parentChallenge: Challenge
  kind: RewardType!
  name: String!
  description: String
  image: String
  recurrent: Boolean!
  cost: Float
  amount: Float
  message: String
  challenges: [Challenge!]
  players: [PlayerReward!]!
}

enum RewardType {
  POINT
  BADGE
  VIRTUAL_ITEM
  COUPON
  REVEAL
  UNLOCK
  HINT
  MESSAGE
}

type PlayerReward {
  id: ID!
  player: Player!
  reward: Reward!
  count: Float!
}

type Player {
  id: ID!
  game: Game!
  user: User!
  points: Float!
  rewards: [PlayerReward!]!
}

type User {
  id: ID!
  name: String!
  username: String!
  email: Email!
  roles: [Role!]!
  photo: String
  telephone: String
  birthDate: Date
  active: Boolean!
  lastActivityAt: Date
  createdAt: Date
  updatedAt: Date
  registrations: [Player!]
}

"""Email custom scalar type"""
scalar Email

enum Role {
  USER
  ADMIN
}

type Condition {
  order: Float!
  leftEntity: String!
  leftProperty: String!
  comparingFunction: String!
  rightEntity: String!
  rightProperty: String!
}

type Criteria {
  conditions: [Condition!]!
  junctors: [Junctor!]!
}

enum Junctor {
  AND
  OR
}

type Action {
  type: Category!
  parameters: [String!]!
}

enum Category {
  GIVE
  TAKE
  UPDATE
}

type ActionHook {
  id: ID!
  game: Game!
  parentChallenge: Challenge
  trigger: TriggerEvent!
  sourceId: String
  criteria: Criteria
  actions: [Action!]!
  recurrent: Boolean!
  active: Boolean!
  lastRun: Date
}

enum TriggerEvent {
  SUBMISSION_EVALUATED
  SUBMISSION_RECEIVED
  SUBMISSION_ACCEPTED
  SUBMISSION_REJECTED
  CHALLENGE_COMPLETED
  CHALLENGE_FAILED
  CHALLENGE_REJECTED
  REWARD_GRANTED
  PLAYER_UPDATED
  POINTS_UPDATED
  DUEL_INVITATION_RECEIVED
  DUEL_INITIATED
  DUEL_ACCEPTED
  DUEL_REJECTED
  DUEL_COMPLETED
}

type ScheduledHook {
  id: ID!
  game: Game!
  parentChallenge: Challenge
  criteria: Criteria
  actions: [Action!]!
  recurrent: Boolean!
  cron: String
  interval: Float
  active: Boolean!
  lastRun: Date
}

type Leaderboard {
  id: ID!
  game: Game!
  parentChallenge: Challenge
  name: String!
  metrics: [String!]!
  sortingOrders: [SortingOrder!]!
}

enum SortingOrder {
  ASC
  DESC
}

type Ranking {
  player: Player!
  score: JSON!
}

type Badge {
  id: ID!
  game: Game!
  parentChallenge: Challenge
  name: String!
  description: String
  image: String
  recurrent: Boolean!
  cost: Float
  players: [PlayerReward!]!
}

type Coupon {
  id: ID!
  game: Game!
  parentChallenge: Challenge
  name: String!
  description: String
  image: String
  recurrent: Boolean!
  cost: Float
  amount: Float
  players: [PlayerReward!]!
}

type Hint {
  id: ID!
  game: Game!
  parentChallenge: Challenge
  name: String!
  description: String
  image: String
  recurrent: Boolean!
  cost: Float
  message: String
  challenges: [Challenge!]
  players: [PlayerReward!]!
}

type Message {
  id: ID!
  game: Game!
  parentChallenge: Challenge
  name: String!
  description: String
  image: String
  recurrent: Boolean!
  cost: Float
  message: String
  challenges: [Challenge!]
  players: [PlayerReward!]!
}

type Point {
  id: ID!
  game: Game!
  parentChallenge: Challenge
  name: String!
  description: String
  recurrent: Boolean!
  amount: Float
  players: [PlayerReward!]!
}

type VirtualItem {
  id: ID!
  game: Game!
  parentChallenge: Challenge
  name: String!
  description: String
  image: String
  recurrent: Boolean!
  cost: Float
  amount: Float
  players: [PlayerReward!]!
}

type Unlock {
  id: ID!
  game: Game!
  parentChallenge: Challenge
  name: String!
  description: String
  recurrent: Boolean!
  cost: Float
  challenges: [Challenge!]
  players: [PlayerReward!]!
}

type Reveal {
  id: ID!
  game: Game!
  parentChallenge: Challenge
  name: String!
  description: String
  recurrent: Boolean!
  cost: Float
  challenges: [Challenge!]
  players: [PlayerReward!]!
}

type ChallengeStatus {
  id: ID!
  player: Player!
  challenge: Challenge!
  startedAt: Date
  openedAt: Date
  endedAt: Date
  state: State!
}

enum State {
  AVAILABLE
  LOCKED
  HIDDEN
  OPENED
  FAILED
  COMPLETED
  REJECTED
}

type Query {
  user(id: String!): User!
  users: [User!]!
  queryCheck: String!
  scheduledHooks: [ScheduledHook!]!
  actionHooks: [ActionHook!]!
  getAll: Leaderboard!
  getPlayerRankings(leaderboardId: String!): [Ranking!]!
  badges: [Badge!]!
  coupons: [Coupon!]!
  hints: [Hint!]!
  messages: [Message!]!
  points: [Point!]!
  virtualItems: [VirtualItem!]!
  unlocks: [Unlock!]!
  reveals: [Reveal!]!
  challenges: [Challenge!]!
  submission(submissionId: String!): Submission!
  submissions(exerciseId: String!, gameId: String!): [Submission!]!
  game(id: String!): Game!
  get(challengeId: String!, playerId: String!): ChallengeStatus!
}

type Mutation {
  saveUser(id: ID, userInput: UserInput!): User!
  deleteUser(id: ID!): User!
  login(login: String!, password: String!): User!
  signup(name: String!, username: String!, email: Email!, password: String!): User!
  mutationCheck: String!
  createSubmission(submissionData: SendSubmissionInput!): Submission!
  importGEdILArchive(gameInput: GameInput!, file: Upload!): Game!
}

input UserInput {
  name: String!
  username: String!
  email: Email!
  telephone: String
  birthDate: Date
  photo: String
  roles: [Role!] = [USER]
  password: String
  active: Boolean
}

input SendSubmissionInput {
  id: String!
  game: String!
  player: String!
  exerciseId: String!
  codeFile: String!
}

input GameInput {
  name: String!
  description: String
  gedilLayerId: String
  gedilLayerDescription: String
  startDate: Date
  endDate: Date
}

"""The `Upload` scalar type represents a file upload."""
scalar Upload
